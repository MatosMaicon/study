# Configuração para coletar métricas e logs do cluster K8s
# Envia os dados para o SigNoz instalado no namespace platform

global:
  clusterName: kind-lab
  deploymentEnvironment: dev

otelCollectorEndpoint: signoz-otel-collector.platform.svc.cluster.local:4317
otelInsecure: true

# Agente que roda em todos os nós (DaemonSet)
otelAgent:
  resources:
    requests:
      cpu: 50m
      memory: 100Mi
    limits:
      cpu: 200m
      memory: 200Mi
  rbac:
    create: true

# Deployment para agregação de dados
otelDeployment:
  enabled: true
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 300m
      memory: 256Mi

# Habilita presets comuns de monitoramento de K8s conforme o chart signoz/k8s-infra
presets:
  # Monitoramento de recursos do host (CPU, Mem, Disco, etc)
  hostMetrics:
    enabled: true
  # Monitoramento de recursos do Kubernetes via Kubelet (Pods, Nodes, etc)
  kubeletMetrics:
    enabled: true
  # Coleta de logs do Kubernetes
  logsCollection:
    enabled: true
  # Injeta metadados (namespace, pod name, etc) nas métricas e logs
  kubernetesAttributes:
    enabled: true
  # Métricas do Cluster (via Kube-State-Metrics) - Corrigido de kubeStateMetrics para clusterMetrics
  clusterMetrics:
    enabled: true
  # Métricas do K8s Events
  k8sEvents:
    enabled: true
